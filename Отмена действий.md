[<К содержанию](./%D0%9F%D1%80%D0%BE%D1%87%D1%82%D0%B8.md)

# Отмена действий

На любом этапе можно захотеть что-то отменить. Здесь мы рассмотрим несколько основных инструментов для отмены внесенных изменений. Будьте осторожны, потому что не всегда можете отменить некоторые из этих отмен. Это одна из немногих областей в *Git*, где можно потерять часть работы, если сделаете это неправильно.

Одна из распространенных отмен происходит, когда  фиксируете слишком рано и, возможно, забываете добавить некоторые файлы или перепутываете сообщение о фиксации. Если хотите повторить этот коммит, внесите дополнительные изменения, которые забыли, разместите их и зафиксируйте снова, используя `--amend` опцию:

```bush=
$ git commit --amend
```

Эта команда берет промежуточную область и использует ее для фиксации. Если не вносили никаких изменений с момента последнего коммита (например, выполнили эту команду сразу после предыдущего коммита), то снимок будет выглядеть точно так же, и все, что изменили, это сообщение о фиксации.

Запускается тот же редактор сообщений о фиксации, но он уже содержит сообщение о предыдущей фиксации. Можно отредактировать сообщение так же, как всегда, но оно перезаписывает предыдущую фиксацию.

В качестве примера, если фиксируете, а затем понимаете, что забыли внести изменения в файл, который хотели добавить в этот коммит, можно сделать что-то вроде этого:

```bush=
$ git commit -m 'Initial commit'
$ git add forgotten_file
$ git commit --amend
```

В итоге получается один коммит — второй коммит заменяет результаты первого.
***
###### <font color="blue">Примечание:</font>
###### Важно понимать, что когда вносите изменения в последний коммит, это не столько исправляет его, сколько заменяет его полностью новым, улучшенным коммитом, который устраняет старый коммит и ставит на его место новый коммит. Фактически, это похоже на то, как если бы предыдущий коммит никогда не происходил, и он не будет отображаться в истории репозитория.
***


Очевидная ценность внесения изменений в коммиты заключается в том, чтобы внести незначительные улучшения в последний коммит, не загромождая историю репозитория сообщениями о фиксации вида “Упс, забыл добавить файл” или “Черт возьми, исправляю опечатку в последнем коммите”.


***
###### <font color="blue">Примечание:</font>
###### Исправляйте только те коммиты, которые все еще являются локальными и не были куда-либо отправлены. Изменение ранее отправленных коммитов и принудительное нажатие на ветку вызовут проблемы у пользователей. 

* [<Удаление промежуточного файла](./%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BF%D1%80%D0%BE%D0%BC%D0%B5%D0%B6%D1%83%D1%82%D0%BE%D1%87%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0.md)
* [<Снятие изменений с измененного файла](./%D0%A1%D0%BD%D1%8F%D1%82%D0%B8%D0%B5%20%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9%20%D1%81%20%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0.md)
* [<Отмена действий с помощью `git restore`](./%D0%9E%D1%82%D0%BC%D0%B5%D0%BD%D0%B0%20%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D0%B9%20%D1%81%20%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%20git%20restore.md)
* [<Удаление промежуточного файла с помощью `git restore`](./%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BF%D1%80%D0%BE%D0%BC%D0%B5%D0%B6%D1%83%D1%82%D0%BE%D1%87%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%20%D1%81%20%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%20git%20restore.md)
* [<Снятие изменений с измененного файла с помощью `git restore`](./%D0%A1%D0%BD%D1%8F%D1%82%D0%B8%D0%B5%20%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9%20%D1%81%20%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%20%D1%81%20%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%20git%20restore.md)